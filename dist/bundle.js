/*
 * Plutonium Vanilla-Background-Image-Switch v1.0.3
 * (c) 2019 Jesse Dalessio - https://plutonium.dev
 * Released under the MIT license
*/
!function(){var e=new function(){const e=this;this.$uids={},this.getUid=function(){for(;;){let n=t();if(!e.$uids[n])return e.$uids[n]=n}function t(){return Math.random().toString(36).substr(2,8).toUpperCase().replace(/^\d/,"Z")}},this.asyncRefs=function(){const e=this,t={};this.add=function(n,i,a){e.cancel(n),t[n]={obj:a,type:i}},this.cancel=function(e){let n=t[e];n&&("setTimeout"===n.type?clearTimeout(n.obj):"requestAnimationFrame"===n.type&&cancelAnimationFrame(n.obj),delete t[e])}}};document.addEventListener("DOMContentLoaded",function(){var t,n="background-image-switch";document.body.querySelectorAll("div[data-pu-"+n+"]").forEach(function(i){new function(i){var a=JSON.parse(i.getAttribute("data-pu-"+n)||"{}"),o=document.querySelector(a.target.querySelector||"body"),r=new e.asyncRefs,u=document.styleSheets[document.styleSheets.length-1],s=a.animate;a.$uid=e.getUid(),a.$isRoot=!0,a.target=a.target||{},i.classList.add("pu-"+n+"-comp","pu-"+n+"-comp-"+a.$uid),document.head.appendChild(document.createElement("style")),a.css.forEach(function(e){u.insertRule(e,u.rules.length)}),function(){function e(e,i){if(i.image){e.$PU_background_image_switch_data=i;var c=i.imageElm=document.createElement("DIV");if(i.preload=(new Image).src=i.image,c.classList.add("pu-"+n+"-image","pu-"+n+"-image-"+i.$uid,"pu-"+n+"-image-"+i.name),u.insertRule(".pu-"+n+"-image-"+i.$uid+"{display:none;position:fixed;width:100%;height:100%;top:0px;left:0px;background-image:url("+i.image+") !important;}"),s){var d=".pu-"+n+"-image-"+i.$uid+"{transition:",l="",m="";for(var p in s)if("props"!==p){var f=s[p].props||s.props;d+=l+p+" "+Object.keys(f).map(function(e){return f[e]}).join(" "),m+=p+":"+s[p].from+";",i.$duration=Math.max(i.$duration||0,1e3*parseFloat(f.duration||0)),l=","}console.log(),u.insertRule(d+";"+m+"}",u.rules.length)}o.insertBefore(c,o.firstChild),i.$isRoot?g(i):e.addEventListener("mouseenter",function(){g(i)}),e.addEventListener("mouseleave",function(e){for(var t=a.target.sticky?document.querySelector(!0===a.target.sticky?".pu-"+n+"-comp-"+a.$uid:a.target.sticky):null,i=e.toElement;i&&i!=t&&(!i.getAttribute||!i.getAttribute("data-pu-link"));)i=i.parentNode;i||g(a)})}function g(e){function n(e,t){for(var n in s||{})"props"!=n&&(e.imageElm.style[n]=s[n][t])}e.imageElm.style.display="block",r.cancel("hide"),r.add("show","requestAnimationFrame",requestAnimationFrame(function(){e.imageElm.offsetWidth,n(e,"to")})),t&&t!=e&&function(e){n(e,"from"),r.add("hide","setTimeout",setTimeout(function(){e.imageElm.style.display="none"},e.$duration))}(t),t=e}}e(i,a),i.querySelectorAll(".link").forEach(function(t,n){var i=JSON.parse(t.getAttribute("data-pu-link")||"{}");i.$uid="link"+n,e(t,i)})}()}(i)})})}();